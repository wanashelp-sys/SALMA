(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{46:(e,s,t)=>{Promise.resolve().then(t.bind(t,5404))},5404:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),a=t(2115),l=t(2619),n=t.n(l),i=t(5239),c=t(9286);function d(){let[e,s]=(0,a.useState)(""),[t,l]=(0,a.useState)(""),[d,o]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),x=async s=>{if(s.preventDefault(),o(""),!e||!t)return void o("يرجى ملء جميع الحقول");h(!0);try{let{data:s,error:r}=await c.ND.from("users").select("user_id, username, role, password_hash").eq("username",e).single();if(r||!s||s.password_hash!==t){o("اسم المستخدم أو كلمة المرور غير صحيحة"),h(!1);return}localStorage.setItem("user",JSON.stringify({userId:s.user_id,username:s.username,role:s.role})),alert("تم تسجيل الدخول بنجاح!"),"teacher"===s.role?window.location.href="/dashboard/teacher":window.location.href="/dashboard/student"}catch(e){console.error("Login error:",e),o("حدث خطأ أثناء تسجيل الدخول")}finally{h(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-secondary/20 via-white to-olive/10",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white/95 rounded-3xl shadow-2xl p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(n(),{href:"/",className:"inline-flex items-center gap-2 mb-4",children:(0,r.jsx)("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)(i.default,{src:"/logo/شعار (1).png",alt:"معمل سلمى",width:50,height:50,className:"object-contain"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-accent mb-2",children:"تسجيل الدخول"}),(0,r.jsx)("p",{className:"text-sm text-accent/70",children:"ادخلي إلى معمل سلمى التعليمي"})]}),d&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"⚠️"}),(0,r.jsx)("span",{children:d})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-accent mb-1",children:"اسم المستخدم"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 border-2 border-clay/20 rounded-lg focus:border-primary focus:outline-none",placeholder:"اسم المستخدم",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-accent mb-1",children:"كلمة المرور"}),(0,r.jsx)("input",{type:"password",value:t,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border-2 border-clay/20 rounded-lg focus:border-primary focus:outline-none",placeholder:"كلمة المرور",required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox"}),(0,r.jsx)("span",{className:"text-accent",children:"تذكرني"})]}),(0,r.jsx)("a",{href:"#",className:"text-primary hover:underline",children:"نسيت كلمة المرور؟"})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-primary to-secondary text-white font-bold py-4 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"جاري تسجيل الدخول...":"تسجيل الدخول"}),(0,r.jsxs)("div",{className:"text-center text-sm text-accent",children:["ليس لديكِ حساب؟"," ",(0,r.jsx)(n(),{href:"/register",className:"text-primary hover:underline font-semibold",children:"إنشاء حساب جديد"})]})]})]})})}},9286:(e,s,t)=>{"use strict";t.d(s,{ND:()=>r});let r=(0,t(6347).UU)("https://ydmavbbgtvkygosbyezv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkbWF2YmJndHZreWdvc2J5ZXp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3OTY5MzgsImV4cCI6MjA3ODM3MjkzOH0.Ri4TmK2Bv7xx3DZl0D0pPK7dOOSM7OkP9FPko_-R3Ys")}},e=>{e.O(0,[850,885,441,255,358],()=>e(e.s=46)),_N_E=e.O()}]);